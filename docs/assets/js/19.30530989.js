(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{427:function(a,t,_){"use strict";_.r(t);var o=_(2),v=Object(o.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h3",{attrs:{id:"设计依据-参考官方文档"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设计依据-参考官方文档"}},[a._v("#")]),a._v(" 设计依据（参考官方文档）")]),a._v(" "),t("p",[a._v("Nacos从2.2.0版本开始,可通过SPI机制注入多数据源实现插件,并在引入对应数据源实现后,便可在Nacos启动时通过读取"),t("code",[a._v("application.properties")]),a._v("配置文件中"),t("code",[a._v("spring.datasource.platform")]),a._v("配置项选择加载对应多数据源插件。")]),a._v(" "),t("p",[a._v("官方介绍文档：https://nacos.io/zh-cn/docs/v2/plugin/datasource-plugin.html")]),a._v(" "),t("h3",{attrs:{id:"如何开发插件-参考官方文档"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何开发插件-参考官方文档"}},[a._v("#")]),a._v(" 如何开发插件（参考官方文档）")]),a._v(" "),t("ol",[t("li",[a._v("引入"),t("code",[a._v("nacos-datasource-plugin")]),a._v("依赖")]),a._v(" "),t("li",[a._v("实现"),t("code",[a._v("com.alibaba.nacos.plugin.datasource.mapper")]),a._v("包下数据表对应Mapper接口中的特殊SQL方法，主要是涉及分页等方言差别，可参考"),t("code",[a._v("com.alibaba.nacos.plugin.datasource.impl")]),a._v("下Derby以及MySQL的实现，只需实现对应接口即可。接口与表对应关系如下：")])]),a._v(" "),t("table",[t("thead",[t("tr",[t("th",[a._v("数据库表")]),a._v(" "),t("th",[a._v("Mapper")])])]),a._v(" "),t("tbody",[t("tr",[t("td",[a._v("config_info_aggr")]),a._v(" "),t("td",[a._v("ConfigInfoAggrMapper")])]),a._v(" "),t("tr",[t("td",[a._v("config_info_beta")]),a._v(" "),t("td",[a._v("ConfigInfoBetaMapper")])]),a._v(" "),t("tr",[t("td",[a._v("config_info")]),a._v(" "),t("td",[a._v("ConfigInfoMapper")])]),a._v(" "),t("tr",[t("td",[a._v("config_info_tag")]),a._v(" "),t("td",[a._v("ConfigInfoTagMapper")])]),a._v(" "),t("tr",[t("td",[a._v("config_tags_relation")]),a._v(" "),t("td",[a._v("ConfigTagsRelationMapper")])]),a._v(" "),t("tr",[t("td",[a._v("his_config_info")]),a._v(" "),t("td",[a._v("HistoryConfigInfoMapper")])])])]),a._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[t("p",[a._v("编写SPI配置文件，其名字为"),t("code",[a._v("com.alibaba.nacos.plugin.datasource.mapper.Mapper")]),a._v("，写入实现Mapper接口的类，可参考config模块中Derby与MySQL配置文件。")])]),a._v(" "),t("li",[t("p",[a._v("插件使用者则可以通过依赖此插件，达到实现对应数据源操作的效果")])]),a._v(" "),t("li",[t("p",[a._v("编译运行")])])]),a._v(" "),t("h3",{attrs:{id:"设计分析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设计分析"}},[a._v("#")]),a._v(" 设计分析")]),a._v(" "),t("p",[a._v("nacos源码中Mysql和Oracle方言差距主要存在于分页查询方面，nacos源码中均使用limit关键字进行分页查")]),a._v(" "),t("p",[a._v("询。所以本插件主要对分页查询的部分进行适配Oracle的重新实现。")]),a._v(" "),t("h3",{attrs:{id:"完成开发"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#完成开发"}},[a._v("#")]),a._v(" 完成开发")])])}),[],!1,null,null,null);t.default=v.exports}}]);