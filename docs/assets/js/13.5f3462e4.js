(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{419:function(t,s,_){"use strict";_.r(s);var v=_(2),a=Object(v.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"使用公共存储的目的"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用公共存储的目的"}},[t._v("#")]),t._v(" 使用公共存储的目的")]),t._v(" "),s("ol",[s("li",[t._v("多服务器共享。容器不指定具体服务器，由Docker Swarm根据资源使用情况进行调度。")]),t._v(" "),s("li",[t._v("易于备份。所有服务的数据、配置文件存储在同一个地方，方便备份以及升级分布式存储。")])]),t._v(" "),s("h2",{attrs:{id:"将一台linux服务器作为nfs公共存储服务器端"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#将一台linux服务器作为nfs公共存储服务器端"}},[t._v("#")]),t._v(" 将一台Linux服务器作为NFS公共存储服务器端")]),t._v(" "),s("p",[t._v("172.25.16.63")]),t._v(" "),s("ol",[s("li",[t._v("安装所需要的软件包"),s("code",[t._v("yum install nfs-utils rpcbind")])]),t._v(" "),s("li",[t._v("提前创建需要共享的目录，编辑配置文件"),s("code",[t._v("vim /etc/exports")])])]),t._v(" "),s("p",[t._v("/opt/nfsdata 172.25.16.0/24(rw,sync,no_all_squash,no_subtree_check,no_root_squash,insecure)")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("配置")]),t._v(" "),s("th",[t._v("含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("/opt/data")]),t._v(" "),s("td",[t._v("表示本机通过nfs共享的目录")])]),t._v(" "),s("tr",[s("td",[t._v("172.25.16.0/24")]),t._v(" "),s("td",[t._v("表示共享的网段")])]),t._v(" "),s("tr",[s("td",[t._v("(rw,sync,no_all_squash...)")]),t._v(" "),s("td",[t._v("表示目录权限")])])])]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[s("code",[t._v("systemctl start rpcbind & systemctl start rpcbind")])]),t._v(" "),s("li",[s("code",[t._v("systemctl start nfs & systemctl start nfs")])]),t._v(" "),s("li",[t._v("若再次修改/etc/exports可使用"),s("code",[t._v("exportfs -rv")]),t._v("重新共享所有目录并输出详细信息")]),t._v(" "),s("li",[t._v("使用命令"),s("code",[t._v("nfsstat")]),t._v("查看当前nfs服务共享情况")])]),t._v(" "),s("h2",{attrs:{id:"客户端挂载对应目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#客户端挂载对应目录"}},[t._v("#")]),t._v(" 客户端挂载对应目录")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("安装所需软件包"),s("code",[t._v("yum install nfs-utils")])])]),t._v(" "),s("li",[s("p",[t._v("挂载相应目录"),s("code",[t._v("mount -t nfs 172.25.16.63:/opt/nfsdata /opt/data")])])]),t._v(" "),s("li",[s("p",[t._v("执行完成后"),s("code",[t._v("mount -l")]),t._v("查看当前服务器目录挂载情况")])])])])}),[],!1,null,null,null);s.default=a.exports}}]);